# 네이버 맵 사진 다운로더 프로젝트

## 📦 프로젝트 구조

```
/home/user/
├── 📄 naver_map_bulk_downloader.py      (22KB) ⭐ 메인 스크립트
├── 📄 naver_map_photo_downloader.py     (8.5KB) - 단일 URL용 스크립트
├── 📄 requirements.txt                  (64B)  - 필수 패키지 목록
├── 📄 run_bulk_downloader.sh            (2.1KB) - 자동 실행 스크립트
├── 📄 사용가이드.md                      (9.8KB) - 상세 사용 가이드
├── 📄 README_BULK.md                    (6.5KB) - 대량 다운로더 README
├── 📄 README.md                         (2.3KB) - 단일 다운로더 README
├── 📄 테스트_리스트.xlsx                 (5.1KB) - 테스트용 엑셀 (3개 행)
└── 📁 uploaded_files/
    └── 리스트_네이버지도링크추가.xlsx     (13KB)  - 원본 엑셀 (45개 행)
```

## 🎯 핵심 기능

### ✅ 요구사항 완벽 구현

1. **✅ 엑셀 리스트 기반 처리**
   - 엑셀 파일에서 지역, 지역상세, 매장명, 네이버지도링크 읽기

2. **✅ 3단계 폴더 구조 자동 생성**
   ```
   downloads/
   └── 지역/
       └── 지역상세/
           └── 매장명/
               ├── 네이버지도_링크.html
               ├── 업체사진/
               ├── 외부/
               └── 내부/
   ```

3. **✅ 카테고리별 사진 분류**
   - 업체사진, 외부, 내부 등 자동 감지
   - 카테고리가 없으면 "전체사진" 폴더에 저장

4. **✅ 크로스체크 링크 파일**
   - 각 매장 폴더에 `네이버지도_링크.html` 생성
   - 브라우저에서 바로 네이버 지도 확인 가능

5. **✅ 영상 제외, 사진만 다운로드**
   - 이미지 파일만 선별적으로 다운로드
   - JPG, PNG, WebP 지원

6. **✅ 고화질 원본 다운로드**
   - 썸네일을 원본 크기(w1200)로 자동 변환

## 🚀 사용 방법

### 빠른 시작 (3단계)

```bash
# 1. 패키지 설치
pip install -r requirements.txt

# 2. Chrome 설치 확인
google-chrome --version  # 또는 chromium-browser --version

# 3. 실행
python naver_map_bulk_downloader.py 리스트_네이버지도링크추가.xlsx
```

### 자동 실행 스크립트 사용

```bash
./run_bulk_downloader.sh
```

## 📊 테스트 실행

작은 샘플로 먼저 테스트:

```bash
# 3개 매장만 테스트 (약 2~3분 소요)
python naver_map_bulk_downloader.py 테스트_리스트.xlsx

# 전체 45개 매장 실행 (약 18~25분 소요)
python naver_map_bulk_downloader.py uploaded_files/리스트_네이버지도링크추가.xlsx
```

## 🎨 실행 결과 예시

```
============================================================
🚀 네이버 맵 대량 사진 다운로더 시작
============================================================

📊 엑셀 파일 로드: 3개 행 발견
✅ Chrome 드라이버 초기화 완료

============================================================
[1/3] 처리 중: 서울 > 중구 > 온아2호
============================================================
   📁 폴더 생성: downloads/서울/중구/온아2호
   🔗 링크 파일 저장: 네이버지도_링크.html
   🌐 페이지 로딩: https://naver.me/FfB3j16z
   📷 사진 탭 클릭 완료
   📂 발견된 카테고리: 업체사진, 외부, 내부
   ✅ 총 24개 사진 URL 추출 완료
   📁 카테고리: 업체사진 (12개)
   📁 카테고리: 외부 (8개)
   📁 카테고리: 내부 (4개)
   ✅ 24개 사진 다운로드 완료

📊 진행률: 33.3% (1/3)
```

## 📁 생성되는 폴더 구조

```
downloads/
├── 서울/
│   └── 중구/
│       ├── 온아2호/
│       │   ├── 네이버지도_링크.html  ← 🔗 크로스체크용
│       │   ├── 업체사진/
│       │   │   ├── 업체사진_001.jpg
│       │   │   ├── 업체사진_002.jpg
│       │   │   └── ...
│       │   ├── 외부/
│       │   │   ├── 외부_001.jpg
│       │   │   └── ...
│       │   └── 내부/
│       │       ├── 내부_001.jpg
│       │       └── ...
│       │
│       ├── 라힌/
│       │   ├── 네이버지도_링크.html
│       │   └── 전체사진/
│       │       └── photo_001.jpg
│       │
│       └── 수련/
│           └── ...
```

## 🔍 크로스체크 방법

1. 각 매장 폴더의 `네이버지도_링크.html` 파일 열기
2. "네이버 지도에서 보기" 버튼 클릭
3. 실제 네이버 지도와 다운로드된 사진 비교
4. 누락된 사진이나 카테고리 확인

## 📦 필요한 패키지

```
selenium>=4.15.0    # 웹 자동화
requests>=2.31.0    # HTTP 요청
pandas>=2.0.0       # 엑셀 처리
openpyxl>=3.1.0     # 엑셀 파일 읽기
```

## 🌐 지원하는 URL 형식

- ✅ `https://naver.me/xxxxx` (단축 URL)
- ✅ `https://map.naver.com/p/entry/place/xxxxx` (전체 URL)
- ✅ `https://m.place.naver.com/place/xxxxx` (모바일 URL)

## ⚠️ 주의사항

1. **Chrome 필수**: Chrome 또는 Chromium 브라우저 설치 필요
2. **처리 시간**: 매장당 약 20~40초 소요 (사진 개수에 따라 다름)
3. **저작권**: 개인 용도로만 사용하세요
4. **인터넷 연결**: 안정적인 네트워크 필요
5. **디스크 공간**: 매장당 약 5~15MB 필요

## 🐛 문제 해결

### Chrome 드라이버 오류
```bash
# Ubuntu
sudo apt-get install chromium-browser

# macOS
brew install --cask google-chrome
```

### 패키지 오류
```bash
pip install --upgrade selenium requests pandas openpyxl
```

### 메모리 부족
- 엑셀 파일을 10~20개씩 나눠서 실행

## 📚 상세 문서

- **📘 사용가이드.md**: 전체 가이드 (문제 해결, 고급 설정 포함)
- **📗 README_BULK.md**: 대량 다운로더 README
- **📙 README.md**: 단일 URL 다운로더 README

## 🎉 완성도

- ✅ 엑셀 기반 대량 처리
- ✅ 3단계 폴더 구조 자동 생성
- ✅ 카테고리별 사진 분류
- ✅ 크로스체크 링크 HTML 파일
- ✅ 영상 제외, 사진만 다운로드
- ✅ 고화질 원본 다운로드
- ✅ 진행률 표시
- ✅ 통계 리포트
- ✅ 에러 처리
- ✅ 상세 문서

## 💡 추가 기능 (옵션)

추후 필요하면 추가 가능:
- [ ] 특정 카테고리만 선택 다운로드
- [ ] 이미지 크기 제한
- [ ] 중복 이미지 제거
- [ ] 실패한 매장만 재시도
- [ ] GUI 버전

---

**버전**: 1.0.0  
**제작일**: 2026-02-03  
**제작**: AI Assistant  
**라이선스**: 개인 용도 자유 사용
